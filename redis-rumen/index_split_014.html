<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Redis入门指南（第2版）</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<blockquote id="filepos90071" class="calibre_11"><a href="index_split_000.html#filepos4639"><span class="calibre2"><span class="bold"><span class="calibre_2">3.1 热身</span></span></span></a></blockquote><p class="calibre_14">在介绍 Redis 的数据类型之前，我们先来了解几个比较基础的命令作为热身，赶快打开redis-cli，跟着样例亲自输入命令来体验一下吧！</p><p class="calibre_9">1．获得符合规则的键名列表</p><p class="calibre_9">KEYS pattern</p><p class="calibre_9">pattern支持glob风格通配符格式，具体规则如表3-1所示。</p><p class="calibre_10">表3-1 glob 风格通配符规则</p><p class="calibre_"><img src="images/00079.jpg" class="calibre_21"/>
</p><p class="calibre_9">现在Redis中空空如也（如果你从第2章开始就一直跟着本书的进度输入命令，此时数据库中可能还会有个foo键），为了演示KEYS命令，首先我们得给Redis加点料。使用SET命令（会在3.2节介绍）建立一个名为bar的键：</p><p class="calibre_9">redis&gt; SET bar 1</p><p class="calibre_9">OK</p><p class="calibre_9">然后使用 KEYS *就能获得Redis中所有的键了（当然由于数据库中只有一个bar键，所以 KEYS ba*或者 KEYS bar 等命令都能获得同样的结果）：</p><p class="calibre_9">redis&gt; KEYS *</p><p class="calibre_9">1) "bar"</p><p class="calibre_9">注意 KEYS命令需要遍历Redis中的所有键，当键的数量较多时会影响性能，不建议在生产环境中使用。</p><p class="calibre_9">提示 Redis不区分命令大小写，但在本书中均会使用大写字母表示Redis 命令。</p><p class="calibre_9">2．判断一个键是否存在</p><p class="calibre_9">EXISTS key</p><p class="calibre_9">如果键存在则返回整数类型1，否则返回0。例如：</p><p class="calibre_9">redis&gt; EXISTS bar</p><p class="calibre_9">(integer) 1</p><p class="calibre_9">redis&gt; EXISTS noexists</p><p class="calibre_9">(integer) 0</p><p class="calibre_9">3．删除键</p><p class="calibre_9">DEL key [key …]</p><p class="calibre_9">可以删除一个或多个键，返回值是删除的键的个数。例如：</p><p class="calibre_9">redis&gt; DEL bar</p><p class="calibre_9">(integer) 1</p><p class="calibre_9">redis&gt; DEL bar</p><p class="calibre_9">(integer) 0</p><p class="calibre_9">第二次执行DEL命令时因为bar键已经被删除了，实际上并没有删除任何键，所以返回0。</p><p class="calibre_9">技巧 DEL 命令的参数不支持通配符，但我们可以结合Linux的管道和 xargs命令自己实现删除所有符合规则的键。比如要删除所有以“user:”开头的键，就可以执行redis-cli KEYS "user:*" | xargs redis-cli DEL。另外由于 DEL 命令支持多个键作为参数，所以还可以执行 redis-cli DEL `redis-cli KEYS "user:*"`来达到同样的效果，但是性能更好。</p><p class="calibre_9">4．获得键值的数据类型</p><p class="calibre_9">TYPE key</p><p class="calibre_9">TYPE命令用来获得键值的数据类型，返回值可能是string（字符串类型）、hash（散列类型）、list（列表类型）、set（集合类型）、zset（有序集合类型）。例如：</p><p class="calibre_9">redis&gt; SET foo 1</p><p class="calibre_9">OK</p><p class="calibre_9">redis&gt; TYPE foo</p><p class="calibre_9">string</p><p class="calibre_9">redis&gt; LPUSH bar 1</p><p class="calibre_9">(integer) 1</p><p class="calibre_9">redis&gt; TYPE bar</p><p class="calibre_9">list</p><p class="calibre_9">LPUSH命令的作用是向指定的列表类型键中增加一个元素，如果键不存在则创建它， 3.4节会详细介绍。</p><div class="mbp_pagebreak" id="calibre_pb_14"></div>
</body></html>
