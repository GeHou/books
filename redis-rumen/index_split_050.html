<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Redis入门指南（第2版）</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<blockquote id="filepos602458" class="calibre_11"><a href="index_split_000.html#filepos30052"><span class="calibre2"><span class="bold"><span class="calibre_2">A.2 REDIS_CMD_DENYOOM</span></span></span></a></blockquote><p class="calibre_14">拥有 REDIS_CMD_DENYOOM 属性的命令有可能增加 Redis 占用的存储空间，显然拥有该属性的命令都拥有 REDIS_CMD_WRITE 属性，但反之则不然。例如，DEL 命令拥有 REDIS_ CMD_WRITE 属性，但其总是会减少数据库的占用空间，所以不拥有 REDIS_CMD_DENYOOM属性。</p><p class="calibre_9">当数据库占用的空间达到了配置文件中maxmemory 参数指定的值且根据maxmemory-policy 参数的空间释放规则无法释放空间时，Redis 会拒绝执行拥有 REDIS_CMD_DENYOOM属性的命令。</p><p class="calibre_9">提示 拥有 REDIS_CMD_DENYOOM 属性的命令每次调用时不一定都会使数据库的占用空间增大，只是有可能而已。例如，SET 命令当新值长度小于旧值时反而会减少数据库的占用空间。但无论如何，当数据库占用空间超过限制时，Redis都会拒绝执行拥有 REDIS_CMD_DENYOOM 属性的命令，而不会分析其实际上是不是会真的增加空间占用。</p><p class="calibre_9">拥有REDIS_CMD_DENYOOM属性的命令如下：</p><p class="calibre_9">SET</p><p class="calibre_9">SETNX</p><p class="calibre_9">SETEX</p><p class="calibre_9">PSETEX</p><p class="calibre_9">APPEND</p><p class="calibre_9">SETBIT</p><p class="calibre_9">SETRANGE</p><p class="calibre_9">INCR</p><p class="calibre_9">DECR</p><p class="calibre_9">RPUSH</p><p class="calibre_9">LPUSH</p><p class="calibre_9">RPUSHX</p><p class="calibre_9">LPUSHX</p><p class="calibre_9">LINSERT</p><p class="calibre_9">BRPOPLPUSH</p><p class="calibre_9">LSET</p><p class="calibre_9">RPOPLPUSH</p><p class="calibre_9">SADD</p><p class="calibre_9">SINTERSTORE</p><p class="calibre_9">SUNIONSTORE</p><p class="calibre_9">SDIFFSTORE</p><p class="calibre_9">ZADD</p><p class="calibre_9">ZINCRBY</p><p class="calibre_9">ZUNIONSTORE</p><p class="calibre_9">ZINTERSTORE</p><p class="calibre_9">HSET</p><p class="calibre_9">HSETNX</p><p class="calibre_9">HMSET</p><p class="calibre_9">HINCRBY</p><p class="calibre_9">HINCRBYFLOAT</p><p class="calibre_9">INCRBY</p><p class="calibre_9">DECRBY</p><p class="calibre_9">INCRBYFLOAT</p><p class="calibre_9">GETSET</p><p class="calibre_9">MSET</p><p class="calibre_9">MSETNX</p><p class="calibre_9">SORT</p><p class="calibre_9">RESTORE</p><p class="calibre_9">BITOP</p><div class="mbp_pagebreak" id="calibre_pb_50"></div>
</body></html>
