<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos33589" class="calibre_8"><span class="calibre1"><span class="bold">技巧2不要自我重复</span></span></p><p class="calibre_9"> 对于在行尾添加内容这样的常见操作，如添加分号，Vim提供了一个专门的命令，可以把两步操作合并为一步。 </p><p class="calibre_7">假设有如下的JavaScript程序片段：</p><p class="calibre_"><img src="images/00255.jpg" class="calibre_16"/></p><p class="calibre_7">我们想在每行的结尾添加一个分号。要实现这一点，先得把光标移到行尾，然后切换到插入模式进行修改。<span class="bold">$</span> 命令可以完成移动动作，接着就可以执行 <span class="bold">a</span>;<span class="bold">&lt;Esc&gt;</span> 完成修改了。</p><p class="calibre_7">要完成全部修改，我们也可以对下面两行做完全相同的操作，不过那样做会错过这里将要提到的小窍门。由于 <span class="bold">.</span> 命令可以重复上次的修改，因此我们不必重复之前的操作，而是执行两次 <span class="bold">j$.</span>。一个键（<span class="bold">.</span>）顶3个（<span class="bold">a</span>;<span class="bold">&lt;Esc&gt;</span>），虽然每次省的并不多，不过在重复操作时，累积效应可不小。</p><p class="calibre_7">不过让我们再仔细审视一下这个操作模式：<span class="bold">j$.</span>。<span class="bold">j</span> 命令使光标下移一行，而 <span class="bold">$</span> 命令把光标移到行尾。我们用了两下按键，仅仅是为了把光标移到指定位置，以便可以用 <span class="bold">.</span> 命令。你觉得还有改进的余地吗？</p><p class="calibre_8"><span class="calibre3"><span class="bold">减少无关的移动</span></span></p><p class="calibre_9"><span class="bold">a</span> 命令在当前光标之后添加内容，而 <span class="bold">A</span> 命令则在当前行的结尾添加内容。不管光标当前处于什么位置，输入 <span class="bold">A</span> 都会进入插入模式，并把光标移到行尾。换句话说，它把 <span class="bold">$a</span> 封装成了一个按键操作。在本技巧后的一箭双雕部分中，我们将会看到Vim提<a class="calibre2"></a>供了不少这样的复合命令。</p><p class="calibre_7">下面是对之前的例子的改进：</p><p class="calibre_6"><img src="images/00259.jpg" class="calibre_17"/></p><p class="calibre_6">我们通过用 <span class="bold">A</span> 来代替 <span class="bold">$a</span>，大大提升了 <span class="bold">.</span> 命令的效率。我们不必再把光标移到行尾，只需保证它位于该行内就行了（可在任意位置）。现在我们可以重复执行足够多次的 <span class="bold">j.</span> ，完成对后续行的修改。</p><p class="calibre_7">一键移动，另一键操作，真是太完美了！请留意这种应用模式，因为我们即将在更多的例子中看到它的身影。</p><p class="calibre_7">虽然这一模式对这个简短的例子来说很好用，但它不是万能的。试想一下，如果我们不得不给连续50行添加分号，即便每个修改输一次 <span class="bold">j.</span> ，看起来也是一项很繁重的工作。跳到技巧30可以看到另外一种解决方法。</p><p class="calibre_6">一箭双雕</p><p class="calibre_6"> 我们可以这样说，A 命令把两个动作（$a）合并成了一次按键。不过它不是唯一一个这样的命令，很多Vim的单键命令都可以被看成两个或多个其他命令的组合。下表列出了类似的一些例子，你能找出它们之间别的共同点吗？ </p><p class="calibre4" style="margin:0pt; border:0pt; height:1em"> </p><table valign="top" class="calibre_18"><tr valign="top" class="calibre_19"><td colspan="1" rowspan="1" valign="top" class="calibre_20"><span class="bold">  复合命令  </span>
</td><td colspan="1" rowspan="1" valign="top" class="calibre_20"><span class="bold">  等效的长命令  </span>
</td></tr><tr valign="top" class="calibre_19"><td colspan="1" rowspan="1" valign="top" class="calibre_20">  C   </td><td colspan="1" rowspan="1" valign="top" class="calibre_20">  c$   </td></tr><tr valign="top" class="calibre_19"><td colspan="1" rowspan="1" valign="top" class="calibre_20">  s   </td><td colspan="1" rowspan="1" valign="top" class="calibre_20">  cl   </td></tr><tr valign="top" class="calibre_19"><td colspan="1" rowspan="1" valign="top" class="calibre_20">  <span class="calibre_21">  </span>S </td><td colspan="1" rowspan="1" valign="top" class="calibre_20">  ^c   </td></tr><a class="calibre2"></a><tr valign="top" class="calibre_19"><td colspan="1" rowspan="1" valign="top" class="calibre_20">  I   </td><td colspan="1" rowspan="1" valign="top" class="calibre_20">  ^i   </td></tr><tr valign="top" class="calibre_19"><td colspan="1" rowspan="1" valign="top" class="calibre_20">  A   </td><td colspan="1" rowspan="1" valign="top" class="calibre_20">  $a   </td></tr><tr valign="top" class="calibre_19"><td colspan="1" rowspan="1" valign="top" class="calibre_20">  o   </td><td colspan="1" rowspan="1" valign="top" class="calibre_20">  A&lt;CR&gt;   </td></tr><tr valign="top" class="calibre_19"><td colspan="1" rowspan="1" valign="top" class="calibre_20">  O   </td><td colspan="1" rowspan="1" valign="top" class="calibre_20">  ko   </td></tr></table><p class="calibre_6"> 如果你发觉自己正在输入 ko（或更糟糕，在用 k$a&lt;CR&gt;），马上打住！想想你在干什么，然后你就会意识到可以把它换成O 命令。 </p><p class="calibre_7"> 你找出这些命令别的共同点了吗？它们全都会从普通模式切换到插入模式。仔细想想这一点，并想想这对 . 命令可能产生怎样的影响。 </p><div class="mbp_pagebreak" id="calibre_pb_4"></div>
</body></html>
