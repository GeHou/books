<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos119324" class="calibre_8"><span class="calibre1"><span class="bold">技巧23只要可能，最好用操作符命令，而不是可视命令</span></span></p><p class="calibre_9"> 可视模式可能比Vim的普通模式操作起来更自然一些，但是它有一个缺点：在这个模式下.命令有时会有一些异常的表现。我们可以用普通模式下的操作符命令来规避此缺点。 </p><p class="calibre_7">假设我们想把下面列表中的链接文字转换为大写格式：</p><p class="calibre_"><img src="images/00185.jpg" class="calibre_54"/></p><p class="calibre_7">我们可以用<span class="bold">vit</span>来选择标签里的内容。<span class="bold">vit</span>可被解读为高亮选中标签内部的内容（visually select inside the tag），其中，<span class="bold">it</span>命令是一种被称为文本对象（text object）的特殊动作命令，我们将在技巧51中对其进行详细的讲解。</p><p class="calibre_8"><span class="calibre2"><span class="bold">使用可视模式下的命令</span></span></p><p class="calibre_9">在可视模式中，我们可以选定一个选区然后对其进行操作。本例中，我们可以使用<span class="bold">U</span>命令来把所选中的字符转换为大写（参见<span class="bold">:h v_U</span><img src="images/00243.jpg" class="calibre_10"/>），具体操作参见表4-1。</p><p class="calibre_7">在转换完第一行后，现在我们想对接下来的两行进行同样的修改。用点范式试一下吧，怎么样？</p><blockquote class="calibre_26">
<span class="bold">表4-1用可视模式下的命令进行大写转换</span>
</blockquote><p class="calibre_6"><img src="images/00008.jpg" class="calibre_55"/></p><p class="calibre_6">好，我们执行一下<span class="bold">j.</span>命令，把光标移到下一行并重复上次的修改。此命令在第二行工作得很好，但如果我们再执行一次，最终就会得到这个看起来有点古怪的结果：</p><p class="calibre_"><img src="images/00190.jpg" class="calibre_56"/></p><p class="calibre_7">你看到发生什么了吗？当一条可视模式命令被重复执行时，它会影响相同数量的文本（参见<span class="bold">:h visual-repeat:h aw</span><img src="images/00243.jpg" class="calibre_10"/>）。在本例中，最初的命令影响了一个由3个字母组<a></a>成的单词。在第二行它依旧工作得很好，因为该行恰好也包含一个由3个字母组成的单词。但是，当我们想对一个由5个字母组成的单词重复此命令时，它只成功转换了其中的前3个字母，留下2个字母未被转换。</p><p class="calibre_8"><span class="calibre2"><span class="bold">使用普通模式下的操作符命令</span></span></p><p class="calibre_9">可视模式下的<span class="bold">U</span>命令有一个等效的普通模式命令：<span class="bold">gU{motion}</span>（参见<span class="bold">:h gU</span><img src="images/00243.jpg" class="calibre_10"/>）。如果我们用此命令做第一处修改，就可以用点范式完成后续的修改，如表4-2所示。</p><blockquote class="calibre_26">
<span class="bold">表4-2用普通模式下的操作符命令进行大写转换</span>
</blockquote><p class="calibre_6"><img src="images/00028.jpg" class="calibre_57"/></p><p class="calibre_8"><span class="calibre2"><span class="bold">结论</span></span></p><p class="calibre_9">这两种方式都只需要4次按键操作：<span class="bold">vitU</span>及<span class="bold">gUit</span>，但其背后的含义却大相径庭。在可视模式所采用的方式里，这4次按键可以被当做两个独立的命令。<span class="bold">vit</span>用来选中选区，而<span class="bold">U</span>用来对选区进行转换。与之相反的是，<span class="bold">gUit</span>命令可以被当成一个单独的命令，它由一个操作符（<span class="bold">gU</span>）和一个动作命令（<span class="bold">it</span>）组成。</p><p class="calibre_7">如果我们想使点命令能够重复某些有用的工作，那么最好要远离可视模式。作为一般的原则，在做一系列可重复的修改时，最好首选操作符命令，而不是其对应的可视模式命令。</p><p class="calibre_7">这并不是说可视模式出局了，它仍然占有一席之地。因为并非每个编辑任务都需要重复执行，对一次性的修改任务来说，可视模式完全够用。并且，尽管Vim的动作命令允许我们进行精确的移动，不过有时要修改的文本范围的结构很难用动作命令表达出来，而处理这种情形却恰恰是可视模式所擅长的。</p><p class="calibre_5">
<a></a>
</p><div class="mbp_pagebreak" id="calibre_pb_31"></div>
</body></html>
