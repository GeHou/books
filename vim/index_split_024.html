<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos106816" class="calibre_8"><span class="calibre1"><span class="bold">技巧20深入理解可视模式</span></span></p><p class="calibre_9"> 可视模式允许我们选中一个文本区域并在其上操作。尽管这看起来似乎很熟悉，但对于所选中的文本，Vim的视角却有异于其他文本编辑器。 </p><p class="calibre_7">假设我们暂时没有在Vim中工作，而是在网页里填写文本框。我们已经输入了单词“March”，但发现应该输入的是“April”。因此，我们先用鼠标双击此单词，把它高亮选中后，按退格键删除它，然后再输入正确的月份。</p><p class="calibre_7">可能你已经知道了，其实在本例中并没有必要按退格键。当单词“March”处于选中状态时，我们只需敲字母“A”，就会替换掉所选内容，清出地方来输入“April”的剩余部分。尽管节省的按键次数有限，但毕竟积少成多。</p><p class="calibre_7">如果你期待Vim的可视模式也能以这种方式工作，那你就会觉得意外了。顾名思义，可视模式仅仅是另外一种模式，也就是说在此模式中，每个按键都完成一种不同的功能。</p><p class="calibre_7">你已经熟识的很多普通模式命令，它们在可视模式中也完成相同的功能。我们仍可以把<span class="bold">h</span>、<span class="bold">j</span>、<span class="bold">k</span>及<span class="bold">l</span>当成光标键使用；也可以用<span class="bold">f{char}</span>跳到当前行的某个字符上，然后用<span class="bold">;</span>和<span class="bold">,</span>命令相应地正向或反向重复此跳转；甚至还可以用查找命令（以及<span class="bold">n</span> / <span class="bold">N</span>命令）跳转到匹配指定模式的地方。每次在可视模式中移动光标，都会改变高亮选区的边界。</p><p class="calibre_7">某些可视模式命令执行的基本功能与普通模式相同，但操作上有些细微的变化。例如，在这两种模式中，<span class="bold">c</span>命令的功能是一样的，都是删除指定的文本并切换到插入模式。不过，要指定其所操作的范围，二者的方式却不甚相同。在普通模式中，我们先触发修改命令，然后使用动作命令指定其作用范围，如果你还记得技巧12中讲过的内容，就会知道这被称为操作符命令。然而，在可视模式中，我们先选中选区，然后再触发修改命令。这种次序颠倒的方式对所有的操作符命令都适用（参见表2-1 Vim的操作符命令）。对大多数人来说，可视模式的做法感觉起来更自然。</p><p class="calibre_7">让我们回顾一下前面遇到的那个简单例子，即把单词“March”修改为“April”。这一次，假设我们不是在网页上的文本框里，而是回到了舒适的Vim中。我们先把光标移到单词“March”的某个位置，然后执行<span class="bold">viw</span>来高亮选择这个词。我们现在不能直接输入单词“April”，因为这会触发<span class="bold">A</span>命令并把文本“pril”添加到行尾。我们要换种做法，先用<span class="bold">c</span>命令修改所选内容，把这个单词删掉并进入插入模式，然后就可以输入完整的“April”了。这种做法和最初在网页中所用的方式类似，只不过用的是<span class="bold">c</span>键而不是退格键。</p><p class="calibre_6">结识选择模式</p><p class="calibre_6"> 在一个典型的文本编辑器环境中，当选中一段文本后，再输入任意可见字符时，这些选中的文本将会被删除。虽然Vim的可视模式未遵从此惯例，但是其选择模式（Select Mode）却按此方式工作。根据Vim的内置文档所述，选择模式“类似于Microsoft Windows的选择模式”（参见:h Select-mode<img src="images/00243.jpg" class="calibre_10"/>）。在此模式下，输入的可见字符会使所选中的文本被删除，同时 Vim 会进入插入模式，并插入这个可见字符。 </p><p class="calibre_5">
<a></a>
</p><p class="calibre_5"> 按&lt;C-g&gt;可以在可视模式及选择模式间切换。切换后看到的唯一不同是屏幕下方的提示信息会在“--可视 --”（-- VISUAL --）及“--选择--”（--SELECT--）间转换。但是，如果在选择模式中输入任意可见字符的话，此字符会替换所选内容并切换到插入模式。当然，如果是在可视模式中，你仍可以像往常一样用c键来修改所选内容。<br class="calibre3"/>
</p><p class="calibre_7"> 如果你乐于接受 Vim 区分模式的特性，那么你应该很少会用到选择模式。这一模式的存在，只是为了迎合那些想让Vim更像其他文本编辑器的用户。我只知道有一处地方会用到选择模式。有一个模拟TextMate的snippet功能的插件，它会用选择模式来高亮当前的占位符。 </p><div class="mbp_pagebreak" id="calibre_pb_28"></div>
</body></html>
