<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos239692" class="calibre_8"><span class="calibre1"><span class="bold">技巧42使用:find打开文件</span></span></p><p class="calibre_9"><span class="bold">:find</span>命令允许我们通过文件名打开一个文件，但无需输入该文件的完整路径。要想利用此功能，我们首先要配置<span class="bold">‘path’</span>选项。</p><p class="calibre_7">只要给出了一个文件的完整文件路径，我们始终可以用<span class="bold">:edit</span>命令打开此文件。然而，如果我们工作的工程中包含了多级嵌套目录呢？每次打开文件都得输入完整路径，这着实令人生厌。这就是为什么要引入<span class="bold">:find</span>命令的原因。</p><p class="calibre_8"><span class="calibre2"><span class="bold">准备工作</span></span></p><p class="calibre_9">我们还是用<span class="bold">files/mvc</span>目录做演示，在 shell 里输入如下命令，从<span class="bold">files/mvc</span>目录中启动 Vim：</p><p class="calibre_8"><span class="bold">➾ $ cd code/files/mvc </span></p><p class="calibre_8"><span class="bold">➾ $ vim index.html</span></p><p class="calibre_9">如果现在试图使用<span class="bold">:find</span>命令，看看会发生什么：</p><p class="calibre_8"><span class="bold">➾ :find Main.js</span></p><p class="calibre_8"><span class="calibre6"> 《 E345: Can't find file "Main.js" in path </span></p><p class="calibre_7">错误信息提示在路径中找不到<span class="bold">Main.js</span>文件。因此，我们先得消除此错误。</p><p class="calibre_8"><span class="calibre2"><span class="bold">配置'path'选项</span></span></p><p class="calibre_9"><span class="bold">'path'</span>选项允许我们指定一些目录，当调用<span class="bold">:find</span>命令时，Vim 会在这些目录中进行查找（参见<span class="bold">:h 'path'</span><img src="images/00243.jpg" class="calibre_10"/>）。在本例中，我们想让<span class="bold">app/controllers</span>及<span class="bold">app/views</span>目录下的文件更容易被找到，因此可以执行下面的命令，把这些目录加入到查找路径中：</p><p class="calibre_5">
<a></a>
</p><p class="calibre_8"><span class="bold">➾ :set path+=app/**</span></p><p class="calibre_9"><span class="bold">**</span> 通配符会匹配<span class="bold">app/</span>目录下的所有子目录。我们已经在技巧37中的“填充参数列表”中讨论过通配符了，但<span class="bold">*</span>和 <span class="bold">**</span>在<span class="bold">'path'</span>设置中的处理与前文略有不同（参见<span class="bold">:h file-searching</span><img src="images/00243.jpg" class="calibre_10"/>）。在<span class="bold">'path'</span>设置中，这些通配符是由Vim扩展的，而不是由 shell扩展的。</p><p class="calibre_6">使用 rails.vim 进行智能路径管理</p><p class="calibre_6"> Tim Pope的rails.vim 插件<sup class="calibre4"><small id="filepos242575" class="calibre5"><a href="index_split_052.html#filepos263530"><span class="calibre5"><span class="calibre_2"><span class="underline">(2)</span></span></span></a></small></sup>对Rails工程进行了一些智能处理，使我们能够更容易地浏览这些工程。此插件会自动配置'path'选项，使之包含Rails工程中所有约定俗成的目录。也就是说，我们直接用:find命令就行了，不必费心去设置'path'。 </p><p class="calibre_7"> 不过rails.vim的功能并不仅限于此。它还提供了一些方便的命令，例如:Rcontroller、:Rmodel、:Rview及其他命令。每条命令都相当于一个特殊版本的:find命令，会在其对应的目录范围内进行查找。 </p><p class="calibre_8"><span class="calibre2"><span class="bold">使用:find命令，通过文件名查找文件</span></span></p><p class="calibre_9">现在<span class="bold">'path'</span>已经配置好了，我们只需给出文件名就可以打开指定目录中的文件了。举个例子，如果想打开<span class="bold">app/controllers/Navigation.js</span>文件，我们可以输入这条命令：</p><p class="calibre_8"><span class="bold">➾ :find Navigation.js</span></p><p class="calibre_9">我们也可以用<span class="bold">&lt;Tab&gt;</span>键自动补全文件名。因此，实际上只需输入<span class="bold">:find nav&lt;Tab&gt;</span>，然后再按一下回车键，就可以达到目的了。</p><p class="calibre_7">你也许想知道，如果指定的文件名不唯一，会发生什么。我们来试验一下。在目录树里有两个名为<span class="bold">Main.js</span>的文件，一个在<span class="bold">app/controllers</span>目录里，另一个在<span class="bold">app/views</span>目录里。</p><p class="calibre_8"><span class="bold">➾ :find Main.js&lt;Tab&gt;</span></p><p class="calibre_9">输入文件名<span class="bold">Main.js</span>后，然后按一下<span class="bold">&lt;Tab&gt;</span>键，Vim 就会在命令行上展开第一个匹配文件的完整文件路径<span class="bold">./app/controllers/Main.js</span>；再按一次<span class="bold">&lt;Tab&gt;</span>键，又会<a></a>换成下一个匹配文件的完整文件路径，即<span class="bold">./app/views/Main.js</span>。在按回车键时，如果之前展开了文件路径，Vim 就会使用这个完整的文件路径打开文件；如果之前没按&lt;Tab&gt; 键展开过，则 Vim 会打开第一个满足条件的文件。</p><p class="calibre_7">如果你已经把<span class="bold">'wildmode'</span> 选项从缺省的“<span class="bold">full</span>”改成了其他值，那么你看到的Tab 补全行为或许有点不一样，更多细节参见技巧32。</p><div class="mbp_pagebreak" id="calibre_pb_56"></div>
</body></html>
