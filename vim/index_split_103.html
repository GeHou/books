<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos515520" class="calibre_8"><span class="calibre1"><span class="bold">技巧89手动控制每一次替换操作</span></span></p><p class="calibre_9"> 一次典型的替换过程包括先找到某个模式的所有匹配，再用其他文本进行自动替换。但是，此过程不总是那么令人满意。我们有时需要先观察每一处匹配，再决定是否进行替换。为了做到这一点，我们可以用标志位c控制:substitute命令的行为。 </p><p class="calibre_7">还记得技巧5中的例子吗？</p><p class="calibre_"><img src="images/00094.jpg" class="calibre_243"/></p><p class="calibre_7">那个时候，仅仅通过查找与替换操作，我们无法完成“content”到“copy”的修改，最后是用点范式解决了问题。但这一次，我们也可以用标志位<span class="bold">c</span>控制substitute命令实现相同的修改：</p><p class="calibre_8"><span class="bold">➾:%s/content/copy/gc</span></p><p class="calibre_9">引入标志位<span class="bold">c</span>后，Vim 会对每处匹配结果提示“替换为copy ?”，我们可以按<span class="bold">y</span>键，完成这次修改，或者按<span class="bold">n</span> 键，跳过这一次修改。无论采用哪种方式，Vim都会执行我们的决定，并移到下一匹配处再次提示。</p><p class="calibre_7">具体到本例，我们将用<span class="bold">yny</span>来回应提示，即在修改第一处和最后一处匹配的同时，保持第二处匹配的内容不变。</p><p class="calibre_7">当然，回应提示的答案不仅限于以上这两种。实际上，Vim会体贴地为我们提示所有的选项“y/n/a/q/l/^E/^Y”。下表展示了每种答案的含义：</p><p class="calibre_6"><img src="images/00014.jpg" class="calibre_244"/></p><p class="calibre_6">通过查阅<span class="bold">:h :s_c</span><img src="images/00243.jpg" class="calibre_10"/>，你也可以在Vim的帮助文档中找到以上信息。</p><p class="calibre_5">
<a></a>
</p><p class="calibre_8"><span class="calibre2"><span class="bold">结论</span></span></p><p class="calibre_9">不同于以往的是，在Vim的替换-确认模式下，键盘上的大多数按键都将失效。尽管<span class="bold">&lt;Esc&gt;</span>键可以让我们像往常一样回到普通模式，但除此之外，周围的一切都使我们感到陌生。</p><p class="calibre_7">从积极的一面看，我们用最少的键盘操作就可以完成任务。从不利的角度看，我们习惯使用的功能键全都失效了。相比之下，如果使用点范式（正如技巧5中所展示的那样）的话，我们自始至终都待在普通模式下，所有的一切都像我们期望的那样工作。</p><p class="calibre_7">我的建议是两种方法都试试，哪种更顺手就用哪种。</p><div class="mbp_pagebreak" id="calibre_pb_117"></div>
</body></html>
