<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos332426" class="calibre_8"><span class="calibre1"><span class="bold">技巧58用全局位置标记在文件间快速跳转</span></span></p><p class="calibre_9"> 全局位置标记是一种书签，让我们可以在文件间跳转。全局标记在我们分析完代码，并想快速跳回一个文件时特别有用。 </p><p class="calibre_7"><span class="bold">m{letter}</span>命令允许我们在当前光标位置创建一个位置标记（参见<span class="bold">:h m</span><img src="images/00243.jpg" class="calibre_10"/>）。小写字母会创建局部于缓冲区的标记，而大写字母则创建全局标记。设置好标记后，就可以用<span class="bold">`{letter}</span>命令使光标快速回到标记所在之处（参见<span class="bold">:h `</span><img src="images/00243.jpg" class="calibre_10"/>）。</p><p class="calibre_7">试下这个例子：先打开你的vimrc文件，按<span class="bold">mV</span>设置一个全局标记（助记词V代表<span class="bold">vimrc</span>），然后切换到另一个文件中按<span class="bold">`V</span>。现在，你应该马上就跳回到<span class="bold">vimrc</span>的全局标记处了。缺省情况下，全局标记在两次编辑会话之间仍然会保留（然而这是可配置的，请参见<span class="bold">:h 'viminfo'</span><img src="images/00243.jpg" class="calibre_10"/>）。因此，现在你用两次按键就可以打开你的<span class="bold">vimrc</span>文件了，除非你又把全局标记 V 设到了另一个地方。</p><p class="calibre_8"><span class="calibre2"><span class="bold">在浏览代码前先设置一个全局标记</span></span></p><p class="calibre_9">当你需要浏览一些文件，然后再快速跳回到原处时，全局标记会显得特别有用。假设我们正在编写代码，而后想要查找代码中所有出现<span class="bold">fooBar()</span>函数的地方，用<span class="bold">:vimgrep</span>命令可以完成这一查找（在技巧110中介绍）：</p><p class="calibre_8"><span class="bold">➾:vimgrep /fooBar/ **</span></p><p class="calibre_9">缺省情况下，<span class="bold">:vimgrep</span>会直接跳到它所找到的第一处匹配上，这或许会切换到另外一个文件。在本例中，我们可以用<span class="bold">&lt;C-o&gt;</span>命令回到执行<span class="bold">:vimgrep</span>命令之前的位置。</p><p class="calibre_7">假设代码里有几十处匹配<span class="bold">fooBar</span> 模式的条目。对每个<span class="bold">:vimgrep</span>所找到的匹配项，在 quickfix 列表中都会为之创建一条记录。现在假设我们花了一两分钟时间遍历<a></a>此列表，最终找到了想找的内容。现在，我们又想回到执行<span class="bold">:vimgrep</span>命令之前的位置，该怎么做呢？</p><p class="calibre_7">我们可以用<span class="bold">&lt;C-o&gt;</span>命令反向遍历跳转列表，以返回该处，但这估计得花不少时间。其实，这个场景恰是全局标记可以大显身手之处。如果在调用<span class="bold">:vimgrep</span>之前，我们先执行了<span class="bold">mM</span>，那么此时用<span class="bold">`M</span>命令就能一下子迅速跳回原处。</p><p class="calibre_7">通常，诸如“你本该先做什么什么”这类的建议，很少会有人喜欢听。但全局位置标记却只在你事先预料到并提前设置好它们时，它们才能对你有所帮助。经过练习，你能学会识别在哪些场景中应该设置全局标记。</p><p class="calibre_7">一般来说，要养成在使用与quickfix列表有关的命令前，如<span class="bold">:grep</span>、<span class="bold">:vimgrep</span> 及<span class="bold">:make</span>，设置全局标记的习惯。另外，在执行与缓冲区列表或参数列表有关的命令前，如<span class="bold">:args {arglist}</span>和<span class="bold">:argdo</span>（参见技巧37），也要设置全局标记。</p><p class="calibre_7">记住，你总共可以设置26个全局位置标记，这比你真正能用到的要多很多。所以，请自由地设置它们吧。无论何时你看到一个地方，之后有可能会想迅速跳回该处，就在那里设个全局标记吧。</p><p class="calibre_5">
<a></a>
</p><p class="calibre_6">第四部分寄存器</p><p class="calibre_6">Vim的寄存器是一组用于保存文本的简单容器。</p><p class="calibre_7">它们既可像剪贴板那样，剪切、复制和粘贴文本；也可以记录一系列按键操作，把它们录制成宏。</p><p class="calibre_7">通过本书的这一部分，我们将掌握这一核心功能。</p><p class="calibre_5">
<a id="filepos337044"></a><a href="index_split_063.html#filepos316219"><span class="calibre_2"><span class="underline">(1)</span></span></a>虫洞(wormhole)，又名爱因斯坦-罗森桥（Einstein-Rosen Bridge），是宇宙中可能存在的连接两个不同时空的狭窄隧道。本处的含义与“超链接”相同。——译者注 </p><p class="calibre_5">
<a id="filepos337369"></a><a href="index_split_064.html#filepos319656"><span class="calibre_2"><span class="underline">(2)</span></span></a> 面包屑小径（breadcrumb trail）来源于童话故事《汉赛尔与格莱特》(Hansel And Gretel)，两个孩子丢下面包屑，形成一条小径回到自己的家。本处意为“浏览路径记录”。——译者注 </p><p class="calibre_5">
<a id="filepos337722"></a><a href="index_split_066.html#filepos330448"><span class="calibre_2"><span class="underline">(3)</span></span></a> https://github.com/tpope/vim-bundler </p><p class="calibre_5">
<a id="filepos337881"></a><a href="index_split_066.html#filepos331143"><span class="calibre_2"><span class="underline">(4)</span></span></a> https://github.com/vim-ruby/vim-ruby </p><div class="mbp_pagebreak" id="calibre_pb_76"></div>
</body></html>
