<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos653498" class="calibre_8"><span class="calibre1"><span class="bold">技巧112与自动补全的弹出式菜单进行交互</span></span></p><p class="calibre_9"> 为了能够从自动补全命令中获得最大收益，我们需要掌握其弹出式菜单的操作方法。简而言之，要么通过精简选项让我们可以快速地做出选择，要么在没有理想单词的情况下，允许我们关闭列表。 </p><p class="calibre_7">当自动补全功能被触发时，Vim会显示一份包含补全列表内容的下拉菜单。我们可以通过表19-2所列的命令与其进行交互。</p><p class="calibre_7">有关更多细节，可以查询Vim文档<span class="bold">:h popupmenu-completion</span><img src="images/00243.jpg" class="calibre_10"/>。</p><p class="calibre_7">不论使用哪种自动补全命令，当其弹出式菜单出现时，都可以用<span class="bold">&lt;C-n&gt;</span>与<span class="bold">&lt;C-p&gt;</span>选择菜单中的上一项或者下一项。而当我们在插入模式下使用<span class="bold">&lt;C-n&gt;</span>与<span class="bold">&lt;C-p&gt;</span>时，将会触发普通关键字自动补全。</p><blockquote class="calibre_26">
<span class="bold">表19-2 可供弹出式菜单使用的命令</span>
</blockquote><p class="calibre_220"><img src="images/00099.jpg" class="calibre_286"/></p><p class="calibre_7"><span class="bold">&lt;C-n&gt;</span>与<span class="bold">&lt;Down&gt;</span>这两个键都用于在弹出式菜单中选择下一项，同样地，<span class="bold">&lt;C-p&gt;</span>与<span class="bold">&lt;Up&gt;</span>都用于选择上一项。无论我们采用的是<span class="bold">&lt;C-p&gt;</span> / <span class="bold">&lt;C-n&gt;</span>还是<span class="bold">&lt;Up&gt;</span> / <span class="bold">&lt;Down&gt;</span>，请注意它们之间细微的功能性差异。</p><p class="calibre_8"><span class="calibre3"><span class="bold">浏览补全列表，但不改变文档内容</span></span></p><p class="calibre_9">当我们按下<span class="bold">&lt;Down&gt;</span>时，位于弹出式菜单中的下一项将被选中，但不会改变文档中的文本。因此，我们可以通过<span class="bold">&lt;Up&gt;</span>与<span class="bold">&lt;Down&gt;</span>这两个键滚动浏览位于弹出式菜单中的补全列表，直到找到理想的单词为止。然后，我们可以通过<span class="bold">&lt;CR&gt;</span>或者<span class="bold">&lt;C-y&gt;</span>将其插入到文档中。</p><p class="calibre_8"><span class="calibre3"><span class="bold">滚动浏览补全列表的同时更新文档内容</span></span></p><p class="calibre_9">相对于<span class="bold">&lt;Down&gt;</span>键而言，<span class="bold">&lt;C-n&gt;</span>键不仅可以选择列表中的下一项，而且它会使用选中的单词来更新文档。这意味着我们不用按<span class="bold">&lt;CR&gt;</span>就可以确认选择项，因为文档中的文本总是与弹出式菜单中的选择项保持同步。一旦从列表中选中了理想的单词，我们只要继续输入文本即可关闭弹出式菜单。</p><p class="calibre_7">由于下列种种原因，我更倾向于使用<span class="bold">&lt;C-p&gt;</span>与<span class="bold">&lt;C-n&gt;</span>这两个组合键，而不是<span class="bold">&lt;Up&gt;</span>与<span class="bold">&lt;Down&gt;</span>。首先，当使用<span class="bold">&lt;C-p&gt;</span>与<span class="bold">&lt;C-n&gt;</span>时，我不用把手指从本位行上挪开；其次，我不必通过<span class="bold">&lt;CR&gt;</span>或者<span class="bold">&lt;C-y&gt;</span>来确认选择项，因为该项文本会自动插入到当<a class="calibre2"></a>前文档中。这也再一次印证了技巧46中的忠告，你的手指要始终放在本位行上。</p><p class="calibre_8"><span class="calibre3"><span class="bold">放弃所有选择项</span></span></p><p class="calibre_9">在我们调出自动补全的菜单之后，或许又想再把它关掉。举个例子，如果补全列表包含了太多的补全建议，那么手动输入整个单词可能会更快一些。这种情况下，我们可以通过<span class="bold">&lt;C-e&gt;</span>来终止这次自动补全，其效果是下拉菜单将被清除，并恢复光标前的文本，即调用自动补全前所输入的内容。</p><p class="calibre_8"><span class="calibre3"><span class="bold">随着输入字符的增多，补全列表将得到精简</span></span></p><p class="calibre_9">在与自动补全弹出式菜单的交互过程中，输入<span class="bold">&lt;C-n&gt;&lt;C-p&gt;</span>是我最喜欢的技巧之一。这其实是两个单独的命令，<span class="bold">&lt;C-n&gt;</span>之后紧接着<span class="bold">&lt;C-p&gt;</span>（用<span class="bold">&lt;C-p&gt;&lt;C-n&gt;</span>也异曲同工）。前一个命令将触发自动补全功能，调出弹出式菜单，并选中补全列表中的第一项。第二条命令则选中补全列表的前一项，即在不关闭弹出式菜单的情况下回到我们所输入的文本中。现在，我们可以继续输入文本，而Vim将实时过滤补全列表。</p><p class="calibre_7">如果补全列表中包含了太多补全建议，让我们一眼望去无从下手，用这种方式将很管用。假设补全列表包含20项补全建议，而我们只输入了单词的前两个字符。当我们输入第3个字符时，补全列表会立即得到精简。我们可以继续按照这种方式输入单词，直到补全列表短到足以令我们方便地选择理想的单词为止。</p><p class="calibre_7">该技巧对于其他自动补全功能也同样有效。例如，我们可以通过<span class="bold">&lt;C-x&gt;&lt;C-o&gt;&lt;C-p&gt;</span>对全能补全的结果进行实时性过滤，或者利用<span class="bold">&lt;C-x&gt;&lt;C-f&gt;&lt;C-p&gt;</span>为文件名补全实现相同的功能。</p><div class="mbp_pagebreak" id="calibre_pb_150"></div>
</body></html>
