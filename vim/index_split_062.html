<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos309740" class="calibre_8"><span class="calibre1"><span class="bold">技巧54在匹配括号间跳转</span></span></p><p class="calibre_9"> Vim 提供了一个动作命令，让我们可以在开、闭括号间跳转。在激活了 matchit.vim插件后，此命令也可以用于成对的 XML 标签，以及某些编程语言中的关键字上。 </p><p class="calibre_7"><span class="bold">%</span>命令允许我们在一组开、闭括号间跳转（参见<span class="bold">:h %</span><img src="images/00243.jpg" class="calibre_10"/>），它可作用于 ()、{}以及[]，如下例所示：</p><p class="calibre_6"><img src="images/00035.jpg" class="calibre_145"/></p><p class="calibre_6">要知道怎样在实际工作中使用<span class="bold">%</span>，请看下面简短的 Ruby 代码：</p><p class="calibre_"><img src="images/00145.jpg" class="calibre_146"/></p><p class="calibre_7">假设我们想把 %w{London Berlin New\ York}改成普通的列表定义 ["London", "Berlin", "New York"]，因此要把大括号改成方括号。你或许会想这是用<span class="bold">%</span>动作的完美场合，你说对了，但这里有个陷阱！</p><p class="calibre_7">假设我们先把光标移到开括号上，然后按<span class="bold">r[</span>把它改成了方括号。现在我们得到一个怪模怪样的结构[London Berlin New\ York}。由于<span class="bold">%</span>命令只能用在配对的括号上，所以现在我们无法用它跳到闭括号字符 } 上。</p><p class="calibre_7">此处的窍门是在做修改之前，要先执行一次<span class="bold">%</span>命令。在执行<span class="bold">%</span>命令时，Vim 会自动为发生跳转的地方设置一个位置标记，而后我们就可以按<span class="bold">``</span>跳回那里。具体操作过程如下：</p><p class="calibre_6"><img src="images/00279.jpg" class="calibre_147"/></p><p class="calibre_6"> 注意：在本例中，&lt;C-o&gt;命令也能完成``动作命令所做的工作（参见技巧55）。另外，也可以用surround.vim插件提供的一些命令，更容易地完成上面的工作，更多内容请见<span class="bold">Surround.vim</span>。 </p><p class="calibre_8"><span class="calibre3"><span class="bold">在配对的关键字间跳转</span></span></p><p class="calibre_9">Vim 在发布时带了一个名为<span class="bold">matchit</span> 的插件，它增强了<span class="bold">%</span>命令的功能。激活此插件后，<span class="bold">%</span>命令就可以在配对的关键字间跳转。例如，在一个HTML文件里，用<span class="bold">%</span>命令可以在开标签和闭标签间跳转；在一个Ruby文件里，可以用它在配对的<span class="bold">class/end</span>、<span class="bold">def/end</span>，以及<span class="bold">if/end</span>间跳转。</p><p class="calibre_7">虽然 <span class="bold">matchit</span>随 Vim一起发布，但它缺省并未使能。下面的 <span class="bold">vimrc</span>将使 Vim在启动时自动加载<span class="bold">matchit</span>插件：</p><p class="calibre_"><img src="images/00091.jpg" class="calibre_148"/></p><p class="calibre_7">此插件提供的增强功能非常有用，因此我建议你激活该插件，更多细节请查阅<span class="bold">:h matchit-install</span><img src="images/00243.jpg" class="calibre_10"/>。</p><p class="calibre_5">
<a class="calibre2"></a>
</p><p class="calibre_6">Surround.vim</p><p class="calibre_6"> 我最喜欢的一个插件是Tim Pope 写的surround.vim<sup class="calibre5"><small id="filepos313367" class="calibre6"><a href="#filepos315597" class="calibre2"><span class="calibre7"><span class="calibre_2"><span class="underline">(5)</span></span></span></a></small></sup>，用它可以很容易地给选中的文本加分隔符。例如，我们可以这样把单词 New York 放在双引号里： </p><p class="calibre_6"><img src="images/00223.jpg" class="calibre_149"/></p><p class="calibre_6"> S"命令是surround.vim 提供的一个命令，可以把它解读为“用一对双引号把选中的文本括起来”（Surround the selection with a pair of double quote marks）。如果想把选中的文本用圆括号或花括号括起来，只需简单地用S)或S}即可。 </p><p class="calibre_7"> 我们也可以用surround.vim修改已有的分隔符。例如，我们可以用cs}]命令把{London}改成[London]，可以把它解读为“把周边的花括号{}改成方括号[]”（Change surrounding {} braces to [] brackets）。另外，我们也可以用cs]}实现相反的修改。这是个非常强大的插件，去看看吧。 </p><p class="calibre_5">
<a id="filepos314493" class="calibre2"></a><a href="index_split_054.html#filepos266241" class="calibre2"><span class="calibre_2"><span class="underline">(1)</span></span></a> Home row指键盘上ASDFGHJKL 等字符所在的行，盲打时手指应始终停留在该行上。本书把“home row”译为“本位行”。——译者注 </p><p class="calibre_5">
<a id="filepos314777" class="calibre2"></a><a href="index_split_054.html#filepos267487" class="calibre2"><span class="calibre_2"><span class="underline">(2)</span></span></a> http://www.catonmat.net/blog/why-vim-uses-hjkl-as-arrow-keys/ </p><p class="calibre_5">
<a id="filepos314961" class="calibre2"></a><a href="index_split_054.html#filepos269814" class="calibre2"><span class="calibre_2"><span class="underline">(3)</span></span></a> off-by-one errors（本书译为“差一错误”）是一种逻辑错误。通常指在编程时，由于对边界条件判断错误，导致多循环一次或少循环一次的错误。——译者注 </p><p class="calibre_5">
<a id="filepos315287" class="calibre2"></a><a href="index_split_057.html#filepos288488" class="calibre2"><span class="calibre_2"><span class="underline">(4)</span></span></a> Scrabble<sup class="calibre5"><small class="calibre6"><span class="calibre7">®</span></small></sup>游戏是一种英语文字图版游戏，依字母在英文单词出现的频率，给其赋予不同的分值。——译者注 </p><p class="calibre_5">
<a id="filepos315597" class="calibre2"></a><a href="#filepos313367" class="calibre2"><span class="calibre_2"><span class="underline">(5)</span></span></a> http://github.com/tpope/vim-surround </p><div class="mbp_pagebreak" id="calibre_pb_70"></div>
</body></html>
