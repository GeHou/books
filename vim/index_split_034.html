<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos153851" class="calibre_8"><span class="calibre1"><span class="bold">技巧29使用‘:t’和‘:m’命令复制和移动行</span></span></p><p class="calibre_9"> :copy命令（及其简写形式:t）让我们可以把一行或多行从文档的一部分复<a class="calibre2"></a>制到另一部分，而:move命令则可以让我们把一行或多行移到文档的其他地方。 </p><p class="calibre_7">我们将使用如下购物清单作为演示：</p><p class="calibre_"><img src="images/00013.jpg" class="calibre_70"/></p><p class="calibre_8"><span class="calibre3"><span class="bold">用‘:t’命令复制行</span></span></p><p class="calibre_9">这个购物清单还没完成，我们也要在五金商店（hardware store）买些钉子（nails）。为完成这个清单，我们将重用文件的最后一行，即在“Hardware Store”下面为之创建一份副本。我们可以用 Ex 命令<span class="bold">:copy</span>轻松地完成这项工作：</p><p class="calibre_6"><img src="images/00034.jpg" class="calibre_71"/></p><p class="calibre_6">copy命令的格式如下（参见<span class="bold">:h :copy</span><img src="images/00243.jpg" class="calibre_10"/>）：</p><p class="calibre_"><img src="images/00053.jpg" class="calibre_72"/></p><p class="calibre_7">在此例中，<span class="bold">[range]</span>是第6行，而<span class="bold">{address}</span>用的是符号<span class="bold">.</span>，它代表当前行。因此，我们可以把<span class="bold">:6copy.</span>命令解读为“为第6行创建一份副本，并放到当前行下方”。</p><p class="calibre_7"><span class="bold">:copy</span>命令可以简写为两个字母<span class="bold">:co</span>，或者也可以用更加简练的 <span class="bold">:t</span>命令，它是<span class="bold">:copy</span>命令的同义词。</p><p class="calibre_7">为了更好地记忆，你可以把该命令想成“复制到（<span class="bold">copy</span> TO）”。下表展示了<span class="bold">:t</span>命令的一些应用实例：</p><p class="calibre_6"><img src="images/00146.jpg" class="calibre_73"/></p><p class="calibre_6"><span class="bold">:t.</span>命令会创建一个当前行副本，而另外一种做法则是用普通模式的复制和粘贴命令（<span class="bold">yyp</span>）来达到同样的效果。这两种复制当前行的技术有个需要关注的差别：<span class="bold">yyp</span>会使用寄存器，而<span class="bold">:t.</span>则不会。因此，当我不想覆盖默认寄存器中的当前内容时，有时我会使用<span class="bold">:t.</span>来复制行。</p><p class="calibre_7">在上表中，也可以将<span class="bold">yyp</span>变化一下来复制我们想要的行，但不管怎样，这都需要一些额外的移动动作。我们得先跳到想复制的行上（<span class="bold">6G</span>），复制该行（<span class="bold">yy</span>），快速跳回原先的位置（<span class="bold">&lt;C-o&gt;</span>），然后再用粘贴命令（<span class="bold">p</span>）创建一个副本。由此可见，在复制距离较远的行时，<span class="bold">:t</span>命令通常更加高效。</p><p class="calibre_7">在Ex命令影响范围广且距离远中，我们已经了解了这个一般规律，即普通模式命令适合在本地进行操作，而Ex命令则可以远距离操作。本节则以实例印证了这一规律。</p><p class="calibre_8"><span class="calibre3"><span class="bold">用‘:m’命令移动行</span></span></p><p class="calibre_9"><span class="bold">:move</span>命令看上去和<span class="bold">:copy</span>命令很相似（参见<span class="bold">:h :move</span><img src="images/00243.jpg" class="calibre_10"/>）：</p><p class="calibre_"><img src="images/00093.jpg" class="calibre_74"/></p><p class="calibre_7">我们可以把它简写为一个字母<span class="bold">:m</span>。假设我们想把Hardware Store一节移到Beauty Parlor一节的下方，用<span class="bold">:move</span>就可以实现这一点，如表5-2所示。</p><p class="calibre_7">在选中高亮选区后，只需简单地执行命令<span class="bold">:'&lt;,'&gt;m$</span> 即可。另外还有种做法，我们也可以执行<span class="bold">dGp</span>，此命令可以分解为：<span class="bold">d</span>删除高亮选区，<span class="bold">G</span>跳转到文件结尾，而<span class="bold">p</span>则粘贴刚刚删除的文本。</p><p class="calibre_5">
<a class="calibre2"></a>
</p><blockquote class="calibre_26">
<span class="bold">表5-2用‘:m’命令对一组进行移动</span>
</blockquote><p class="calibre_75"><img src="images/00117.jpg" class="calibre_76"/><br class="calibre4"/></p><p class="calibre_7">记住，<span class="bold">'&lt;,'&gt;</span>代表了高亮选区。因此我们可以很容易地选中另外一个高亮选区，然后重复执行<span class="bold">:'&lt;,'&gt;m$</span>命令把选中的文本移到文件结尾。重复上次的 Ex 命令非常简单，只需按<span class="bold">@:</span> 即可（技巧31给出了另一个例子），所以这里所采取的方式与使用普通模式命令相比，在重复执行时会更方便。</p><div class="mbp_pagebreak" id="calibre_pb_39"></div>
</body></html>
