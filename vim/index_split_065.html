<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos321079" class="calibre_8"><span class="calibre1"><span class="bold">技巧56遍历改变列表</span></span></p><p class="calibre_9"> 每当对文档做出修改后，Vim 都会记录当时光标所在的位置。遍历改变列表的方法很简单，并且这大概是跳到你要去的地方的最快方式。 </p><p class="calibre_7">你是否曾经使用过撤销命令，然后紧接着又重做呢？这两条命令的结果会相互抵消，不过却会带来一个副作用，即最终光标会停留在上次修改过的地方。如果我们恰好是想跳回到上次修改过的地方，那么就可以用这招。虽然有点剑走偏锋，不过<span class="bold">u&lt;C-r&gt;</span>确实能让我们跳回到那里。</p><p class="calibre_7">Vim 会在编辑会话期间维护一张表，里面记载我们对每个缓冲区所做的修改，此表就是所谓的改变列表（change list，参见<span class="bold">:h changelist</span><img src="images/00243.jpg" class="calibre_10"/>）。用下面的命令可以查看其内容：</p><p class="calibre_8"><span class="bold">➾:changes</span></p><p class="calibre_8"><span class="calibre6"> 《change line col text</span><br class="calibre3"/><span class="calibre6"> 3 1 8 Line one</span><br class="calibre3"/><span class="calibre6"> 2 2 7 Line two</span><br class="calibre3"/><span class="calibre6"> 1 3 9 Line three</span><br class="calibre3"/><span class="calibre6"> &gt;</span><br class="calibre3"/><span class="calibre6"> Press ENTER or type command to continue </span></p><p class="calibre_7">上例的输出结果显示，Vim 为每次修改都记录了行号与列号，我们可以用<span class="bold">g;</span>和<span class="bold">g,</span>命令反向或正向遍历改变列表。你可以拿<span class="bold">;</span>和<span class="bold">,</span>命令当参考，来帮你记忆<span class="bold">g;</span>与<span class="bold">g,</span>命令。前两条命令分别用来正向及反向重复<span class="bold">f{char}</span>命令（参见技巧49）。</p><p class="calibre_7">要想跳到上次文档中被更改过的地方，我们可以按<span class="bold">g;</span>。它会跳到上次完成编辑时光标所在的行及列上，其结果与按<span class="bold">u&lt;C-r&gt;</span>类似，只是它不会对文档造成暂态的改变。</p><p class="calibre_8"><span class="calibre2"><span class="bold">标识上次修改方位的位置标记</span></span></p><p class="calibre_9">Vim会自动创建一些位置标记，它们是对改变列表的一个有用补充。<span class="bold">`.</span>标记总是指向上次修改的位置（参见<span class="bold">:h `.</span><img src="images/00243.jpg" class="calibre_10"/>），而<span class="bold">`^</span>标记则会记录上次退出插入模式时光标所在的位置（参见<span class="bold">:h `^</span><img src="images/00243.jpg" class="calibre_10"/>）。</p><p class="calibre_7">在大多数场景下，跳转到<span class="bold">`.</span>的效果与使用<span class="bold">g;</span>命令相同。不过位置标记只指向最后修改的位置，而改变列表中则保存了多组位置。我们可以多次按<span class="bold">g;</span>命令，每次它都会把我们带到改变列表中较早的一个位置，而<span class="bold">`.</span>则总是把我们带到改变列表的最后一项。</p><p class="calibre_7"><span class="bold">`^</span>标记指向上次插入的位置，它比上次修改的位置更具体一点。如果我们先退出插入模式，接着又在文档中四处移动，然后，当我们又想快速回到退出的地方继续编辑时，用<span class="bold">gi</span>命令就行了（<span class="bold">:h gi</span><img src="images/00243.jpg" class="calibre_10"/>）。此命令会用<span class="bold">`^</span>标记恢复光标位置，并切换到插入模式，这真是省时省力的好办法！</p><p class="calibre_7">Vim 会为编辑会话中的每个单独缓冲区维护一个改变列表，而与之不同的是，每个窗口都会创建一个单独的跳转列表。</p><div class="mbp_pagebreak" id="calibre_pb_74"></div>
</body></html>
