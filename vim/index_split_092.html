<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos467059" class="calibre_8"><span class="calibre1"><span class="bold">技巧79结识查找命令</span></span></p><p class="calibre_9"> 本节将涵盖查找命令的基础知识，包括怎样指定查找的方向，如何重复（或反向重复）上一次查找，以及怎样使用查找历史。 </p><p class="calibre_5">
<a class="calibre2"></a>
</p><p class="calibre_8"><span class="calibre3"><span class="bold">执行一次查找</span></span></p><p class="calibre_9">在普通模式下，按下<span class="bold">/</span>键会调出Vim的查找提示符，可在它的后面输入要查找的模式或者原义文本。另外，只有当我们按下<span class="bold">&lt;CR&gt;</span>键时，Vim才会执行查找命令，而如果换用<span class="bold">&lt;Esc&gt;</span>键的话，查找提示符会消失，我们将重回普通模式。</p><p class="calibre_7">当我们执行一次查找时，Vim会从当前光标位置开始向下扫描，停在所找到的第一处匹配上。如果Vim扫描到文档结尾仍未找到目标，会提示“已查找到文件结尾，再从开头继续查找”，这意味着在某些情况下，一次正向查找反而把我们带到了查找起点之前。尽管听上去有点让人困惑，但只要记住查找命令抵达文档结尾处时会回绕至文档开头继续查找，这就说得通了。</p><p class="calibre_7">如果你只想在当前光标位置至文档结尾的范围内查找，而不想绕回文档继续查找的话，可以关闭<span class="bold">‘wrapscan’</span>选项（参见<span class="bold">:h 'wrapscan'</span>
<img src="images/00243.jpg" class="calibre_10"/>）。</p><p class="calibre_8"><span class="calibre3"><span class="bold">指定查找的方向</span></span></p><p class="calibre_9">当我们使用<span class="bold">/</span>键执行一次查找时，Vim将进行正向扫描。而如果是用<span class="bold">?</span>键调出查找提示符的话，Vim则会进行反向查找。查找提示符始终以<span class="bold">/</span>或者<span class="bold">?</span>字符开头，表明此次查找的扫描方向。</p><p class="calibre_8"><span class="calibre3"><span class="bold">重复上一次查找</span></span></p><p class="calibre_9"><span class="bold">n</span>命令用于跳转到下一处匹配，而<span class="bold">N</span>命令则用于跳转到上一处匹配。通过<span class="bold">n</span>与<span class="bold">N</span>这两条命令，我们可以方便地在各个匹配之间往来穿梭。但“下一处匹配”的定义取决于上下文环境。</p><p class="calibre_7"><span class="bold">n</span>命令既会保证查找方向不变，又会使查找的偏移与上一次保持一致（我们将在技巧83中结识“偏移”）。因此，如果我们用<span class="bold">/</span>执行一次正向查找，<span class="bold">n</span>将继续向下查找；而如果最初的查找命令是 ? 的话，<span class="bold">n</span>将继续向上查找。同时，<span class="bold">N</span>命令将始终与上一次查找的方向保持相反。</p><p class="calibre_7">有时候，我们也许想重复查找同一个模式，但要改变查找的方向或偏移。在这种情况下，如果我们知道不提供模式而直接执行查找时，Vim将重用上一次查找的模式的话，将会对我们大有裨益。表13-1总结了用于重复一次查找的选项：</p><blockquote class="calibre_26">
<span class="bold">表13-1 —用于重复一次查找的选项</span>
</blockquote><p class="calibre_28"><img src="images/00002.jpg" class="calibre_216"/>
<a class="calibre2"></a>
<img src="images/00007.jpg" class="calibre_217"/></p><p class="calibre_7">假设我们使用<span class="bold">?</span>开始一次查找，并已经跳到了上一处匹配，但是我们改主意了，决定向下跳转至其他匹配。当然，我们可以通过<span class="bold">N</span>键做到这一点，但这好像把一切都搞得上下颠倒了。除此之外，也可以执行<span class="bold">/&lt;CR&gt;</span>，即用相同的模式执行一次正向查找。这样一来，我们就可以使用n键遍历文档中余下的匹配了。</p><p class="calibre_7">在技巧84中，我们将遇到一个更复杂的例子，它展示了如何在每次重复查找时改变偏移。</p><p class="calibre_8"><span class="calibre3"><span class="bold">回溯之前的查找</span></span></p><p class="calibre_9">Vim会一直记录我们执行过的查找模式，因此可以方便地重用它们。当查找提示符出现时，我们可以通过<span class="bold">&lt;Up&gt;</span>键，滚动浏览之前的查找记录。实际上，浏览查找历史与浏览命令行历史的接口完全一致。我们已在技巧34中深入讨论过这些内容，并会在技巧85中将这些技术付诸实践。</p><div class="mbp_pagebreak" id="calibre_pb_105"></div>
</body></html>
