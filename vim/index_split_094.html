<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Vim实用技巧</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos474485" class="calibre_8"><span class="calibre1"><span class="bold">技巧81在执行查找前预览第一处匹配</span></span></p><p class="calibre_9"> 激活了增量查找功能之后，将使得Vim的查找命令如虎添翼。该选项可在以下几个方面来改善工作流程。 </p><p class="calibre_7">缺省情况下，我们在输入查找模式时，Vim不会进行查找，只有当我们按下<span class="bold">&lt;CR&gt;</span>后，它才会立即展开行动。<span class="bold">‘incsearch’</span>是我最喜爱的增强型功能（参见<span class="bold">:h 'incsearch'</span><img src="images/00243.jpg" class="calibre_10"/>）。该设置会让Vim根据已在查找域中输入的文本，预览第一处匹配。每当我们新输入一个字符时，Vim会即时更新预览内容。下表展示了它的工作原理：</p><p class="calibre_6"><img src="images/00009.jpg" class="calibre_218"/></p><p class="calibre_6">当我们在查找域中输入“car”之后，Vim会把第一处匹配高亮起来，即本例中的单词“car”。一旦我们继续输入字符“r”，由于当前的高亮单词不再匹配这一模式，因此，Vim将跳转到下一个匹配的单词，这一次是“carrot”。如果此时我们按下<span class="bold">&lt;Esc&gt;</span>键<a></a>的话，查找提示符将会消失，光标也将回退到位于行首的起始位置。但如果按<span class="bold">&lt;CR&gt;</span>执行这条命令的话，光标会跳转到单词“carrot”的首字母上。</p><p class="calibre_7">这种即时的反馈体验让我们了解到何时已经找到目标。如果我们只是想简单地将光标移至单词“carrot”的起始位置，则大可不必在查找域输入完整的单词，因为在本例中，<span class="bold">/</span>carr<span class="bold">&lt;CR&gt;</span>就足够了。但如果没有激活<span class="bold">‘incsearch’</span>功能，除非真正地执行查找命令，否则，对于模式是否已经匹配到了目标，我们将无从知晓。</p><p class="calibre_8"><span class="calibre2"><span class="bold">检查是否存在一处匹配</span></span></p><p class="calibre_9">在我们的例子中，两处部分匹配“car”的单词恰巧在同一行。但试想一下，如果单词“car”与“carrot”被几百个单词所隔开，一旦我们在查找域中将“car”更新为“carr”，Vim将不得不对文档进行滚动才将单词“carrot”显示出来。事实的确如此。</p><p class="calibre_7">假设我们只想确认单词“carrot”是否在当前文档中出现，却不想移动光标，该怎么办呢？当<span class="bold">‘incsearch’</span>选项被启用时，我们只需简单地调出查找提示符，并尽可能多地输入组成单词“carrot”的字符，直到该单词首次映入我们的眼帘。一旦找到该单词，我们只需按下<span class="bold">&lt;Esc&gt;</span>，即可马上结束查找并返回原位，从而避免打断我们的思维。</p><p class="calibre_8"><span class="calibre2"><span class="bold">根据预览结果对查找域自动补全</span></span></p><p class="calibre_9">在最后一个例子中，我们在完整输入单词“carrot”之前就执行了查找命令。如果我们是想把光标简单地移动到第一处匹配上的话，这样做就很好了。但假设我们想让模式匹配完整的单词“carrot”，例如，我们打算在查找命令之后执行一条substitute命令，该怎么办呢？</p><p class="calibre_7">当然，最简单的方式是完整的输入“carrot”，但这里介绍给大家一个好用的快捷键<span class="bold">&lt;C-r&gt;&lt;C-w&gt;</span>。此法会用当前预览的匹配结果对查找域进行自动补全。如果我们已在查找域中输入了“carr”，执行该命令会将“ot”添加到结尾，使其最终匹配完整的单词“carrot”。</p><p class="calibre_7">注意，<span class="bold">&lt;C-r&gt;&lt;C-w&gt;</span>自动补全功能在处理以下场景时略有瑕疵，即一旦在查找内容中加入元字符<span class="bold">\v</span>前缀，<span class="bold">&lt;C-r&gt;&lt;C-w&gt;</span>会把光标下的完整单词，而不是单词的余下部分，作为补全的内容（例如，执行补全后会变成<span class="bold">/\vcarrcarrot&lt;CR&gt;</span>）。因此，只要你找的不是模式，而是单词或词组，基于增量查找的自动补全功能真地能节省一点时间。</p><p class="calibre_5">
<a></a>
</p><div class="mbp_pagebreak" id="calibre_pb_107"></div>
</body></html>
