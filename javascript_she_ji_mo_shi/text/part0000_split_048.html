<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>未知</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<h2 id="nav_point_84" class="calibre7"><strong class="calibre6">6.2　保护代理和虚拟代理</strong></h2>
<p class="calibre1">虽然这只是个虚拟的例子，但我们可以从中找到两种代理模式的身影。代理B可以帮助A过滤掉一些请求，比如送花的人中年龄太大的或者没有宝马的，这种请求就可以直接在代理B处被拒绝掉。这种代理叫作<strong class="calibre2">保护代理</strong>。A和B一个充当白脸，一个充当黑脸。白脸A继续保持良好的女神形象，不希望直接拒绝任何人，于是找了黑脸B来控制对A的访问。</p>
<p class="calibre1">另外，假设现实中的花价格不菲，导致在程序世界里，<code class="calibre9">new Flower</code>也是一个代价昂贵的操作，那么我们可以把<code class="calibre9">new Flower</code>的操作交给代理B去执行，代理B会选择在A心情好时再执行<code class="calibre9">new Flower</code>，这是代理模式的另一种形式，叫作<strong class="calibre2">虚拟代理</strong>。虚拟代理把一些开销很大的对象，延迟到真正需要它的时候才去创建。代码如下：</p>
<pre class="Dai Ma Wu Xing Hao "><code class="calibre9">var B = {
    receiveFlower: function( flower ){
        A.listenGoodMood(function(){    // 监听A的好心情
             var flower = new Flower();    // 延迟创建flower 对象
             A.receiveFlower( flower );
        });
    }
};

</code></pre>
<p class="calibre1">保护代理用于控制不同权限的对象对目标对象的访问，但在JavaScript并不容易实现保护代理，因为我们无法判断谁访问了某个对象。而虚拟代理是最常用的一种代理模式，本章主要讨论的也是虚拟代理。</p>
<p class="calibre1">当然上面只是一个虚拟的例子，我们无需在此投入过多近精力，接下来我们看另外一个真实的示例。</p>
</body></html>
